{% extends 'base.html.twig' %}

{% block body %}
    
    {#******** HTML BODY *******#}
    <div id="wrapper">
        <div id="container">
            
            <div class="row paddingtop50">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center">
                    <span class="title-font white-color"><small>Récupération données</small><br />de formulaire</span>
                    <p>La première ligne seulement, la suite est pour le fun :)</p>
                    <p>Cliquez sur les lignes.... et vous verrez !</p>
                </div>
            </div>

            <br />
            
            <div id='cardBox'>
                
                <div class="row">
                    <div class="col text-center">

                          <div class="id-card">
                            <div class="profile-row">
                              <div class="dp">
                                <div class="dp-arc-outer"></div>
                                <div class="dp-arc-inner"></div>
                                <img id='imgAvatar' src='https://via.placeholder.com/420x420'>
                              </div>
                              <div class="desc">
                                <h1><span id="firstName"></span> <span id="lastName"></span></h1>
                                    <p>Country: <span id="country"></span></p>
                                    <p>City: <span id="city"></span> </p>
                                    <p>Known as: <span id="special"></span></p>
                              </div>
                            </div>
                          </div>

                    </div>

                </div>
            
            </div>
            
            <br />
            
            <table id="tableUser" class="display">
                <thead>
                    <tr>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>City</th>
                        <th>Country Code</th>
                        <th>Specificity</th>
                        <th>Avatar Image</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>{{ firstName }}</td>
                        <td>{{ lastName }}</td>
                        <td>{% if city is not empty %}{{ city }} {% else %} unknown {% endif %}</td>
                        <td>{{ country }}</td>
                        <td>Simple human</td>
                        <td>https://via.placeholder.com/420x420</td>
                    </tr>
                  
                </tbody>
                
                
            </table>
   
        </div>
    </div>
    {#******** END HTML BODY *******#}
    
    {#******** BLOCK JAVASCRIPT *******#}
    <script type="text/javascript">

    function showWhatIsInsideRow(firstName, lastName, city, country, special, imgAvatar) {

        $('#firstName').html(firstName);
        $('#lastName').html(lastName);
        $('#city').html(city);
        $('#country').html(country);
        $('#special').html(special);
        $('#imgAvatar').attr('src', imgAvatar);

        $('#cardBox').show();
    }

    $(document).ready(function() {

        $('#cardBox').hide();

        var tableUser = $('#tableUser').DataTable({
            "columnDefs": [
                {
                    "targets": [ 5 ],
                    "visible": false
                }
            ]
        });

        //Ajoute au tableau des noms ... connus ! >.<
        tableUser.row.add( [
                'Luke',
                'Skywalker',
                '???',
                'Tatooine',
                'Padawan',
                'https://fr.seaicons.com/wp-content/uploads/2015/07/Luke-Skywalker-02-icon.png'
            ],
            ).draw( false );

        // Select the first table row if table got any data
        if (  tableUser.data().any() ) {
            $('#tableUser tbody tr:eq(0)').click();
        }

        // Refresh map according to data row selected (click)
        $('#tableUser tbody').on('click', 'tr', function () {

            var dataRow = tableUser.row( this ).data();
            //alert( 'You clicked on '+dataRow[0]+'\'s row' );

            showWhatIsInsideRow(dataRow[0],dataRow[1],dataRow[2],dataRow[3],dataRow[4],dataRow[5]);

        });

    });

    </script>
    
    <script type="text/javascript" src="//cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    {#******** END BLOCK JAVASCRIPT *******#}
    
    
{#******** CSS BLOCK *******#} 
{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="//cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
    <link href="https://fonts.googleapis.com/css?family=Orbitron" rel="stylesheet"> 
    <style type="text/css">
        body {
                background-color:#3DB680;
            }
       
        /* ID CARD */
        .id-card {
          flex-basis: 100%;
          max-width: 30em;
          border: 1px solid rgb(97, 245, 245);
          margin: auto;
          color: #fff;
          padding: 1em;
          background-color: #0A2129;
          box-shadow: 0px 0px 3px 1px #12a0a0, inset 0px 0px 3px 1px #12a0a0;
        }

        .profile-row {
          display: flex;
        }
        .profile-row .dp {
          flex-basis: 33.3%;
          position: relative;
          margin: 24px;
          align-self: center;
        }
        .profile-row .desc {
          flex-basis: 66.6%;
        }

        .profile-row .dp img {
          max-width: 100%;
          border-radius: 50%;
          display: block;
          box-shadow: 0px 0px 4px 3px #12a0a0;
        }
        .profile-row .desc {
          padding: 1em;
        }

        .profile-row .dp .dp-arc-inner {
          position: absolute;
          width: 100%;
          height: 100%;
          border: 6px solid transparent;
          border-top-color: #0AE0DF;
          border-radius: 50%;
          top: -6px;
          left: -6px;

          animation-duration: 2s;
          animation-name: rotate-clock;
          animation-iteration-count: infinite;
          animation-timing-function: linear;
        }
        @keyframes rotate-clock {
          from {
            transform: rotate(0deg);
          }
          to {
            transform: rotate(360deg);
          }
        }
        .profile-row .dp .dp-arc-outer {
          position: absolute;
          width: calc(100% + 20px);
          height: calc(100% + 20px);
          border: 6px solid transparent;
          border-bottom-color: #0AE0DF;
          border-radius: 50%;
          top: -16px;
          left: -16px;

          animation-duration: 2s;
          animation-name: rotate-anticlock;
          animation-iteration-count: infinite;
          animation-timing-function: linear;
        }
        @keyframes rotate-anticlock {
          from {
            transform: rotate(0deg);
          }
          to {
            transform: rotate(-360deg);
          }
        }

        .profile-row .desc {
          font-family: 'Orbitron', sans-serif;
          color: #ecfcfb;
          text-shadow: 0px 0px 4px #12a0a0;
          letter-spacing: 1px;
        }
        .profile-row .desc h1 {
          margin: 0px;
        }
        /* END ID CARD */
    </style>

{% endblock %}
{#******** END CSS BLOCK *******#}
    
    
    
    
{% endblock %}

